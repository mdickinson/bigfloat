Preparing a release
===================

Notes on creating a release.  These notes apply my own system, currently OS X
10.6, with mpfr and gmp installed via MacPorts.


0. Make sure that you have a clean and up-to-date source tree (e.g., check the
output of 'hg summary').

1. Update version numbers if necessary.  Places that need to be updated include:

      docs/conf.py ('version' and 'release' keys)
      setup.py ('version')

   You might also look at:

      CHANGELOG
      INSTALL
      RELEASING

2. Tag:

   hg tag v0.3.0a2

3. In the bigfloat_cython directory:

      iwasawa:bigfloat_cython mdickinson$ LIBRARY_PATH=/opt/local/lib CPATH=/opt/local/include make upload

   If you don't have PyPI details registered in ~/.pypirc, this may fail;  in that
   case you'll need to reissue the 'python setup.py sdist upload' command in the form
   'python seutp.py sdist register upload'.

   Note that this does a full build; this is necessary in order to resolve the
   documentation references for 'autodoc'.  This creates a directory 'dist'
   containing the source distribution for the bigfloat library.

       iwasawa:bigfloat_cython mdickinson$ ls -l dist
       total 864
       -rw-r--r--  1 mdickinson  staff  439794  4 Dec 17:52 BigFloat-0.3.0a1.tar.gz

   Note that this source distribution does not include the Cython .pyx file, but
   it does contain the C file generated by Cython.  This way, users don't need
   Cython to be able to install the library.  (Though the .pyx file should probably
   be included, for reference purposes only...)

4. Building docs

Again in the bigfloat_cython directory, do:

    LIBRARY_PATH=/opt/local/lib CPATH=/opt/local/include make html
    cd docs/_build/html
    zip -r bigfloat_docs.zip *
    mv -i bigfloat_docs.zip ~/Desktop

Now you can go to:

    http://pypi.python.org/pypi?%3Aaction=pkg_edit&name=bigfloat

and upload the documentation from there.
